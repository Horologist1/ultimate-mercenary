// =================== SISTEMA DE MENSAJES CONTEXTUALES ===================
// Ultimate Mercenary v1.7 - Sistema de mensajes adaptativos CATEGORIZADO OPTIMIZADO
// Mensajes filtrados por: Prueba + Momento del día + Rating + CATEGORÍAS
// v1.7: OPTIMIZACIÓN - Eliminada detección redundante. Tags explícitos con createMessage()
// v1.6: Sistema de tags implementado - Picante, Humillante, Fan, Relleno, 
// Queja, Divertido, Insulto. Proporción controlada: 40+ msgs (excepto Fan/Relleno/Divertido: 100+)
// 10% máximo retos. Contexto ajustado: Día=hangar calma, Noche=hangar supervivencia
// =======================================================================

// === SISTEMA DE TAGGING Y FILTROS PARA MENSAJES CONTEXTUALES ===

// Función para aplicar filtros basándose en categorías ya asignadas
function applyMessageFilters(messages) {
    // Verificar si existe el sistema de filtros
    if (!window.MESSAGE_FILTERS) {
        return messages; // Sin filtros, devolver todos los mensajes
    }
    
    return messages.filter(message => {
        // Si es un objeto mensaje con categoría, usar la categoría asignada
        if (typeof message === 'object' && message.category) {
            const isEnabled = window.MESSAGE_FILTERS.enabledCategories[message.category] !== false;
            
            if (!isEnabled) {
                console.log(`🚫 Mensaje filtrado (${message.category}): ${message.text.substring(0, 50)}...`);
            }
            
            return isEnabled;
        }
        
        // Para retrocompatibilidad con mensajes string (no debería pasar)
        return true;
    });
}

// Función para crear mensaje con categoría
function createMessage(text, category, subCategory = null) {
    return {
        text: text,
        category: category,
        subCategory: subCategory
    };
}

// Sistema de filtros globales
window.MESSAGE_FILTERS = {
    enabledCategories: {
        'fan': true,
        'picante': true,
        'humillante': true,
        'relleno': true,
        'queja': true,
        'divertido': true,
        'insulto': true
    },
    
    applyFilters: function(messages) {
        return messages.filter(msg => {
            if (typeof msg === 'string') {
                // Retrocompatibilidad para mensajes sin categorizar
                return true;
            }
            return this.enabledCategories[msg.category] === true;
        });
    },
    
    getEnabledCategories: function() {
        return this.enabledCategories;
    },
    
    setFilter: function(category, enabled) {
        this.enabledCategories[category] = enabled;
        console.log(`🎛️ Filtro ${category}: ${enabled ? 'ACTIVADO' : 'DESACTIVADO'}`);
    }
};

// === MENSAJES CONTEXTUALES POR PRUEBA ===
const CONTEXTUAL_MESSAGES = {
    // =================== PRUEBA 0: LA CAÍDA ===================
    prueba0: {
        // DÍA + RATING ALTO (>6)
        dia_alto: [
            // === CATEGORÍA: FAN (100+ mensajes) ===
            createMessage("¡XIII domina el hangar como una verdadera superviviente!", "fan"),
            createMessage("Increíble cómo se adapta al entorno hostil", "fan"),
            createMessage("¡Esa calma bajo presión es sobrenatural!", "fan"),
            createMessage("Mi apuesta por XIII en este hangar está asegurada", "fan"),
            createMessage("¡Técnica perfecta explorando el territorio!", "fan"),
            createMessage("XIII demuestra por qué es una superviviente de élite", "fan"),
            createMessage("¡Hangar conquistado con inteligencia pura!", "fan"),
            createMessage("Impresionante adaptación al entorno subterráneo", "fan"),
            createMessage("¡Los sensores del hangar la favorecen!", "fan"),
            createMessage("Técnica depurada manejando equipo de supervivencia", "fan"),
            createMessage("¡Vamos XIII! ¡Demuestra tu supremacía!", "fan"),
            createMessage("Perfect exploration! Los sponsors llamarán", "fan"),
            createMessage("XIII conoce cada rincón necesario para sobrevivir", "fan"),
            createMessage("¡Supervivencia de élite en acción pura!", "fan"),
            createMessage("Ese control del entorno es magistral", "fan"),
            createMessage("¡Sigue mostrando esa coordinación perfecta!", "fan"),
            createMessage("XIII vs hangar hostil: la superviviente gana", "fan"),
            createMessage("¡Fantástico manejo de recursos limitados!", "fan"),
            createMessage("Los algoritmos de supervivencia la favorecen", "fan"),
            createMessage("¡Demuestra que la supervivencia está en tu sangre!", "fan"),
            createMessage("La fluidez de movimiento es hipnótica", "fan"),
            createMessage("XIII sabe exactamente cómo usar cada herramienta", "fan"),
            createMessage("¡Me encanta esa precisión táctica!", "fan"),
            createMessage("Supervivencia inteligente, no bruta", "fan"),
            createMessage("¡Los patrocinadores de equipo táctico van a enloquecer!", "fan"),
            createMessage("Hangar conquistado con gracia", "fan"),
            createMessage("¡Esa es la XIII superviviente que esperaba ver!", "fan"),
            createMessage("Técnica y resistencia van de la mano perfecta", "fan"),
            createMessage("¡Dominando el entorno desde el primer momento!", "fan"),
            createMessage("La resistencia en manos expertas es arte", "fan"),
            createMessage("¡Sigue así y batirás todos los récords!", "fan"),
            createMessage("XIII entiende la física de la supervivencia", "fan"),
            createMessage("¡Perfecto equilibrio entre supervivencia y espectáculo!", "fan"),
            createMessage("Los veteranos reconocemos clase cuando la vemos", "fan"),
            createMessage("¡Mi inversión en XIII está dando frutos!", "fan"),
            createMessage("Cada respiración es estrategia pura", "fan"),
            createMessage("XIII redefine lo que significa ser superviviente", "fan"),
            createMessage("¡Los sensores confirman: niveles óptimos!", "fan"),
            createMessage("Supervivencia científica en tiempo real", "fan"),
            createMessage("¡XIII está estableciendo nuevos estándares!", "fan"),
            createMessage("El hangar se convierte en su territorio personal", "fan"),
            createMessage("¡Dominando física y mentalmente el espacio!", "fan"),
            createMessage("Los biomarcadores no mienten: está en zona", "fan"),
            createMessage("XIII vs adversidad: victoria aplastante", "fan"),
            createMessage("¡Sigue demostrando esa superioridad natural!", "fan"),
            createMessage("Cada movimiento es una lección magistral", "fan"),
            createMessage("¡Los manuales de supervivencia deberían incluir esto!", "fan"),
            createMessage("XIII convierte adversidad en oportunidad", "fan"),
            createMessage("¡El hangar nunca había tenido una reina así!", "fan"),
            createMessage("Técnica, resistencia y show: la trinidad perfecta", "fan"),
            createMessage("La cámara sigue cada movimiento fascinada", "fan"),
            createMessage("XIII domina tanto supervivencia como marketing", "fan"),
            createMessage("¡Cada segundo es oro televisivo!", "fan"),
            createMessage("Los algoritmos están climaxeando", "fan"),
            createMessage("¡Sigue alimentando esa audiencia hambrienta!", "fan"),
            createMessage("XIII entiende que supervivencia = espectáculo", "fan"),
            createMessage("¡Los patrocinadores harán ofertas millonarias!", "fan"),
            createMessage("Hangar: territorio conquistado", "fan"),
            createMessage("¡La reina de la supervivencia ha llegado!", "fan"),
            createMessage("XIII vs el caos: masterclass en directo", "fan"),
            createMessage("¡Sigue siendo la estrella que sabemos que eres!", "fan"),
            createMessage("Los veteranos aplaudimos esta demostración", "fan"),
            createMessage("¡Técnica, velocidad y espectáculo en una!", "fan"),
            createMessage("XIII marca tendencia hasta en hangares", "fan"),
            createMessage("¡Los records están a tu alcance!", "fan"),
            createMessage("Los sensores confirman: técnica de depredador nato", "fan"),
            createMessage("XIII convierte supervivencia en arte", "fan"),
            createMessage("¡Esa mentalidad asesina es lo que necesitamos ver!", "fan"),
            createMessage("El hangar se vuelve más peligroso con XIII", "fan"),
            createMessage("¡Dominio absoluto sobre entorno Y rivales!", "fan"),
            createMessage("Los otros concursantes deberían temer", "fan"),
            createMessage("¡Combinación perfecta de supervivencia y crueldad!", "fan"),
            createMessage("XIII entiende que solo puede quedar uno", "fan"),
            createMessage("Técnica militar aplicada a supervivencia", "fan"),
            createMessage("¡Los rivales son solo obstáculos más complicados!", "fan"),
            createMessage("XIII demuestra supremacía en cada decisión", "fan"),
            createMessage("¡Esa frialdad calculada me emociona!", "fan"),
            createMessage("Los algoritmos de combate están enloqueciendo", "fan"),
            createMessage("XIII sabe que la supervivencia no perdona", "fan"),
            createMessage("¡Depredador perfecto en acción!", "fan"),
            createMessage("El hangar es su reino de caza personal", "fan"),
            createMessage("¡Técnica de guerrera en territorio hostil!", "fan"),
            createMessage("Los ratings de intensidad están por las nubes", "fan"),
            createMessage("XIII entiende la mentalidad del superviviente", "fan"),
            createMessage("¡Cada movimiento calculado para la victoria!", "fan"),
            createMessage("¿Alguien más siente esa energía de depredador?", "fan"),
            createMessage("XIII vs todos: la reina del territorio", "fan"),
            createMessage("Los patrocinadores de combate van a enloquecer", "fan"),
            createMessage("¡Esta es supervivencia de guerrera profesional!", "fan"),
            createMessage("El hangar nunca había visto una fuerza así", "fan"),
            createMessage("¡Técnica letal perfeccionada!", "fan"),
            createMessage("Los números confirman: es una máquina de guerra", "fan"),
            createMessage("XIII domina el arte de la supervivencia cruel", "fan"),
            createMessage("¡Esa mentalidad de victoria me hipnotiza!", "fan"),
            createMessage("Los veteranos de combate reconocemos talento", "fan"),
            createMessage("¡MI CAMPEONA XIII ARRASANDO COMO SIEMPRE!", "fan"),
            createMessage("Team XIII desde el primer día!", "fan"),
            createMessage("¡Aposté todo por ella y no me decepciona!", "fan"),
            createMessage("XIII = inversión segura en entretenimiento", "fan"),
            createMessage("¡Mi IA predictiva apostó bien por XIII!", "fan"),
            createMessage("Llevamos años siguiendo a XIII, ¡es leyenda!", "fan"),
            createMessage("¡MI REINA CONQUISTANDO TERRITORIOS!", "fan"),
            createMessage("XIII fan club reportándose presente", "fan"),
            createMessage("¡NUNCA DUDES DE LA SUPREMACÍA DE XIII!", "fan"),
            createMessage("Team XIII ride or die desde siempre", "fan"),
            createMessage("¡Mi algoritmo de inversión está climaxeando con XIII!", "fan"),
            
            // === CATEGORÍA: RELLENO (100+ mensajes) ===
            createMessage("El hangar subterráneo es más grande de lo esperado", "relleno"),
            createMessage("Las luces de emergencia crean ambiente perfecto", "relleno"),
            createMessage("¡100 concursantes en un solo hangar!", "relleno"),
            createMessage("Los sistemas de ventilación funcionan sorprendentemente bien", "relleno"),
            createMessage("Ultimate Mercenary supera todas las expectativas", "relleno"),
            createMessage("Las cámaras omnipresentes capturan cada momento", "relleno"),
            createMessage("¡Los drones de OCE están por todas partes!", "relleno"),
            createMessage("Este hangar está diseñado para la supervivencia", "relleno"),
            createMessage("Los suministros básicos están estratégicamente colocados", "relleno"),
            createMessage("¡Las zonas de descanso son minimalistas pero funcionales!", "relleno"),
            createMessage("Los pasillos metálicos resuenan con cada paso", "relleno"),
            createMessage("¡La iluminación industrial crea sombras perfectas!", "relleno"),
            createMessage("OCE realmente se ha superado con este diseño", "relleno"),
            createMessage("¡Cada rincón puede esconder algo útil!", "relleno"),
            createMessage("La entrada inicial fue épica de ver", "relleno"),
            createMessage("¡Los grupos se han definido claramente!", "relleno"),
            createMessage("Kaiser debe estar observando desde su torre", "relleno"),
            createMessage("La compuerta blindada guardaba este secreto", "relleno"),
            createMessage("¡2 kilómetros de territorio subterráneo!", "relleno"),
            createMessage("Los sensores de movimiento registran todo", "relleno"),
            createMessage("¡El aire reciclado huele a metal y supervivencia!", "relleno"),
            createMessage("Las paredes reforzadas cuentan historias silenciosas", "relleno"),
            createMessage("¡Ultimate Mercenary: donde los sueños se hacen realidad!", "relleno"),
            createMessage("Los concursantes están descubriendo sus límites", "relleno"),
            createMessage("¡El hangar despierta al superviviente que todos llevamos dentro!", "relleno"),
            createMessage("El entorno separa a los fuertes de los débiles", "relleno"),
            createMessage("¡Cada paso puede ser el último o el definitivo!", "relleno"),
            createMessage("Los biomarcadores registran cada latido", "relleno"),
            createMessage("¡La tensión eléctrica carga el ambiente!", "relleno"),
            createMessage("Las rutas alternativas requieren mente estratégica", "relleno"),
            createMessage("¡Los algoritmos predicen pero no garantizan nada!", "relleno"),
            createMessage("Hangar subterráneo: donde las reglas las escriben los supervivientes", "relleno"),
            createMessage("¡El tiempo fluye diferente aquí abajo!", "relleno"),
            createMessage("Cada concursante tiene una historia que merece contarse", "relleno"),
            createMessage("¡El entorno revela la verdadera naturaleza humana!", "relleno"),
            createMessage("Los sistemas de seguridad vigilan como ojos invisibles", "relleno"),
            createMessage("¡Las inversiones en concursantes son apuestas al corazón!", "relleno"),
            createMessage("El espectáculo supera toda expectativa televisiva", "relleno"),
            createMessage("¡Los sensores biométricos no mienten: esto es real!", "relleno"),
            createMessage("El hangar convierte civiles en supervivientes", "relleno"),
            createMessage("¡Cada zona del hangar tiene su propia personalidad!", "relleno"),
            createMessage("Los concursantes están escribiendo historia en tiempo real", "relleno"),
            createMessage("¡El diseño subterráneo de OCE es una obra maestra!", "relleno"),
            createMessage("Hangar: donde nacen y mueren los héroes", "relleno"),
            createMessage("¡Cada decisión resuena en todo el espacio!", "relleno"),
            createMessage("Los otros 99 concursantes también tienen sueños", "relleno"),
            createMessage("¡Ultimate Mercenary: supervivencia convertida en arte!", "relleno"),
            createMessage("La temperatura controlada mantiene a todos alerta", "relleno"),
            createMessage("¡Los ecos metálicos crean una sinfonía industrial!", "relleno"),
            createMessage("Los suministros de agua están calculados al miligramo", "relleno"),
            createMessage("¡Cada herramienta disponible tiene un propósito!", "relleno"),
            createMessage("El hangar es más complejo de lo que parece", "relleno"),
            createMessage("¡Los espacios ocultos guardan sorpresas!", "relleno"),
            createMessage("La logística de 100 personas es impresionante", "relleno"),
            createMessage("¡OCE ha pensado en cada detalle!", "relleno"),
            createMessage("Los sistemas de emergencia están siempre activos", "relleno"),
            createMessage("¡El hangar respira como un organismo vivo!", "relleno"),
            createMessage("Las zonas de seguridad están marcadas discretamente", "relleno"),
            createMessage("¡Los algoritmos de supervivencia están calibrando!", "relleno"),
            createMessage("El ecosistema artificial funciona perfectamente", "relleno"),
            createMessage("¡Cada concursante añade una pieza al puzzle!", "relleno"),
            createMessage("Las estadísticas se actualizan en tiempo real", "relleno"),
            createMessage("¡El hangar es un laboratorio de comportamiento humano!", "relleno"),
            createMessage("Los protocolos de seguridad son más complejos de lo visible", "relleno"),
            createMessage("¡Ultimate Mercenary redefinirá el entretenimiento!", "relleno"),
            createMessage("El espacio subterráneo oculta múltiples secretos", "relleno"),
            createMessage("¡Los sensores ambientales mantienen condiciones óptimas!", "relleno"),
            createMessage("La arquitectura del hangar favorece la interacción", "relleno"),
            createMessage("¡Cada rincón está diseñado para el drama!", "relleno"),
            createMessage("Los puntos de observación permiten vigilancia total", "relleno"),
            createMessage("¡El hangar es una obra de ingeniería social!", "relleno"),
            createMessage("Las rutas de escape están ocultas pero accesibles", "relleno"),
            createMessage("¡Los sistemas de comunicación funcionan flawlessly!", "relleno"),
            createMessage("El hangar equilibra seguridad con desafío", "relleno"),
            createMessage("¡OCE ha creado el reality show definitivo!", "relleno"),
            createMessage("Los mecanismos de supervivencia están por todas partes", "relleno"),
            createMessage("¡El hangar es una universidad de supervivencia acelerada!", "relleno"),
            createMessage("Las condiciones están diseñadas para revelar carácter", "relleno"),
            createMessage("¡Cada superficie tiene un propósito estratégico!", "relleno"),
            createMessage("El hangar convierte teoría en práctica instantáneamente", "relleno"),
            createMessage("¡Los espacios están optimizados para máximo drama!", "relleno"),
            createMessage("Las variables ambientales están controladas científicamente", "relleno"),
            createMessage("¡El hangar es el laboratorio del futuro!", "relleno"),
            createMessage("Los protocolos de emergencia están siempre listos", "relleno"),
            createMessage("¡Ultimate Mercenary establece nuevos estándares!", "relleno"),
            createMessage("El hangar es una cápsula del tiempo acelerada", "relleno"),
            createMessage("¡Los algoritmos de entretenimiento están aprendiendo!", "relleno"),
            createMessage("Las condiciones recrean perfectamente la presión real", "relleno"),
            createMessage("¡El hangar es donde la ciencia encuentra el espectáculo!", "relleno"),
            createMessage("Los sistemas de soporte vital son invisibles pero vitales", "relleno"),
            createMessage("¡OCE ha creado la evolución de la televisión!", "relleno"),
            createMessage("El hangar desafía límites físicos y mentales", "relleno"),
            createMessage("¡Los concursantes están haciendo historia subterránea!", "relleno"),
            createMessage("Las condiciones están perfectamente calibradas", "relleno"),
            createMessage("¡El hangar es un masterpiece de ingeniería humana!", "relleno"),
            createMessage("Los espacios generan tensión y oportunidad a partes iguales", "relleno"),
            createMessage("¡Ultimate Mercenary trasciende entretenimiento tradicional!", "relleno"),
            createMessage("El hangar es un ecosistema de supervivencia perfecto", "relleno"),
            createMessage("¡Los 100 concursantes están escribiendo el futuro!", "relleno"),
            createMessage("Las variables están diseñadas para máxima autenticidad", "relleno"),
            createMessage("¡El hangar es donde las leyendas nacen!", "relleno"),
            createMessage("Los sistemas integrados crean experiencias inmersivas", "relleno"),
            createMessage("¡OCE ha diseñado la supervivencia como arte!", "relleno"),
            createMessage("El hangar equilibra caos controlado con libertad real", "relleno"),
            createMessage("¡Ultimate Mercenary es el experimento social definitivo!", "relleno"),
            
            // === CATEGORÍA: DIVERTIDO (100+ mensajes) ===
            createMessage("¡XIII explora como si fuera videojuego!", "divertido"),
            createMessage("¿Alguien más ve que XIII habla sola?", "divertido"),
            createMessage("¡XIII mira cada rincón como si fuera una misión secreta!", "divertido"),
            createMessage("¿Nota que XIII sonríe cuando encuentra algo útil?", "divertido"),
            createMessage("¡Parece que está jugando al escondite con las cámaras!", "divertido"),
            createMessage("XIII usa el hangar como si fuera su casa", "divertido"),
            createMessage("¿Alguien cuenta cuántas veces dice 'interesante'?", "divertido"),
            createMessage("¡XIII trata cada herramienta como si fuera un tesoro!", "divertido"),
            createMessage("¿Realmente cree que nadie la ve organizar sus cosas?", "divertido"),
            createMessage("¡XIII convierte supervivencia en performance art!", "divertido"),
            createMessage("¿Alguien más nota que camina con soundtrack invisible?", "divertido"),
            createMessage("¡Parece una exploradora de National Geographic!", "divertido"),
            createMessage("XIII examina todo como científica loca", "divertido"),
            createMessage("¿Está realmente oliendo cada superficie metálica?", "divertido"),
            createMessage("¡XIII convierte el hangar en su laboratorio personal!", "divertido"),
            createMessage("¿Alguien más ve que toca las paredes como piano?", "divertido"),
            createMessage("¡XIII tiene más química con el equipo que con personas!", "divertido"),
            createMessage("¿Realmente está categorización cada tornillo?", "divertido"),
            createMessage("¡Parece que está haciendo inventario de un videojuego!", "divertido"),
            createMessage("XIII trata el hangar como si fuera una nave espacial", "divertido"),
            createMessage("¿Alguien cuenta cuántas veces dice 'perfecto'?", "divertido"),
            createMessage("¡XIII convierte exploración en ritual místico!", "divertido"),
            createMessage("¿Realmente está susurrando a las herramientas?", "divertido"),
            createMessage("¡Parece que está bautizando cada zona del hangar!", "divertido"),
            createMessage("XIII examina todo como detective de CSI", "divertido"),
            createMessage("¿Está haciendo mapas mentales o dibujando invisiblemente?", "divertido"),
            createMessage("¡XIII trata cada descubrimiento como eureka!", "divertido"),
            createMessage("¿Alguien más nota que huele todo antes de usarlo?", "divertido"),
            createMessage("¡Parece una niña en tienda de juguetes supervivenciales!", "divertido"),
            createMessage("XIII convierte organización en arte zen", "divertido"),
            createMessage("¿Realmente está teniendo conversaciones con su equipo?", "divertido"),
            createMessage("¡XIII usa el hangar como set de película de acción!", "divertido"),
            createMessage("¿Alguien cuenta cuántas veces reorganiza las cosas?", "divertido"),
            createMessage("¡Parece que está decorando una casa subterránea!", "divertido"),
            createMessage("XIII examina cada detalle como arqueóloga", "divertido"),
            createMessage("¿Está realmente calibrando su respiración con el ambiente?", "divertido"),
            createMessage("¡XIII convierte supervivencia en meditación activa!", "divertido"),
            createMessage("¿Alguien más ve que practica movimientos invisibles?", "divertido"),
            createMessage("¡Parece que está ensayando una coreografía!", "divertido"),
            createMessage("XIII trata el hangar como si fuera un templo", "divertido"),
            createMessage("¿Realmente está nombrando cada zona que explora?", "divertido"),
            createMessage("¡XIII convierte exploración en sinfonía personal!", "divertido"),
            createMessage("¿Alguien nota que mide todo con sus pasos?", "divertido"),
            createMessage("¡Parece que está memorizando cada centímetro!", "divertido"),
            createMessage("XIII usa técnicas que parecen de película", "divertido"),
            createMessage("¿Está realmente haciendo gimnasia mental invisible?", "divertido"),
            createMessage("¡XIII convierte cada acción en micro-espectáculo!", "divertido"),
            createMessage("¿Alguien cuenta cuántas veces se detiene a 'sentir' el ambiente?", "divertido"),
            createMessage("¡Parece que está dirigiendo una orquesta invisible!", "divertido"),
            createMessage("XIII trata el equipo como si tuviera personalidad", "divertido"),
            createMessage("¿Realmente está teniendo debates internos audibles?", "divertido"),
            createMessage("¡XIII convierte preparación en ritual sagrado!", "divertido"),
            createMessage("¿Alguien más nota que sonríe a las cámaras ocasionalmente?", "divertido"),
            createMessage("¡Parece que está en modo tutorial de videojuego!", "divertido"),
            createMessage("XIII examina todo como si fuera evidencia criminal", "divertido"),
            createMessage("¿Está practicando diálogos con personajes imaginarios?", "divertido"),
            createMessage("¡XIII convierte supervivencia en improvisación teatral!", "divertido"),
            createMessage("¿Alguien cuenta cuántas caras pone por minuto?", "divertido"),
            createMessage("¡Parece que está en casting permanente!", "divertido"),
            createMessage("XIII usa el hangar como si fuera escuela de supervivencia", "divertido"),
            createMessage("¿Realmente está dando clases magistrales a nadie?", "divertido"),
            createMessage("¡XIII convierte cada momento en oportunidad de aprendizaje!", "divertido"),
            createMessage("¿Alguien más ve que hace anotaciones mentales constantes?", "divertido"),
            createMessage("¡Parece que está escribiendo un manual invisible!", "divertido"),
            createMessage("XIII trata la supervivencia como experimento científico", "divertido"),
            createMessage("¿Está haciendo hipótesis sobre cada objeto?", "divertido"),
            createMessage("¡XIII convierte observación en arte performativo!", "divertido"),
            createMessage("¿Alguien nota que imita movimientos de animales?", "divertido"),
            createMessage("¡Parece que está canalizando instintos primordiales!", "divertido"),
            createMessage("XIII usa técnicas que parecen de documental de naturaleza", "divertido"),
            createMessage("¿Realmente está haciendo análisis forense del hangar?", "divertido"),
            createMessage("¡XIII convierte exploración en investigación detectivesca!", "divertido"),
            createMessage("¿Alguien cuenta cuántas teorías desarrolla por hora?", "divertido"),
            createMessage("¡Parece que está resolviendo un misterio cósmico!", "divertido"),
            createMessage("XIII trata cada descubrimiento como pista crucial", "divertido"),
            createMessage("¿Está construyendo teorías conspirativas del hangar?", "divertido"),
            createMessage("¡XIII convierte supervivencia en filosofía aplicada!", "divertido"),
            createMessage("¿Alguien más nota que medita con los ojos abiertos?", "divertido"),
            createMessage("¡Parece que está en sesión de mindfulness extremo!", "divertido"),
            createMessage("XIII usa el ambiente como si fuera terapia", "divertido"),
            createMessage("¿Realmente está haciendo yoga mental?", "divertido"),
            createMessage("¡XIII convierte hangar en retiro espiritual!", "divertido"),
            createMessage("¿Alguien cuenta cuántas veces respira profundo?", "divertido"),
            createMessage("¡Parece que está sincronizando con frecuencias cósmicas!", "divertido"),
            createMessage("XIII trata la supervivencia como arte marcial mental", "divertido"),
            createMessage("¿Está practicando técnicas de concentración extrema?", "divertido"),
            createMessage("¡XIII convierte cada acción en masterclass!", "divertido"),
            createMessage("¿Alguien más ve que baila microscópicamente?", "divertido"),
            createMessage("¡Parece que está en modo 'flow state' permanente!", "divertido"),
            createMessage("XIII usa movimientos que parecen de tai chi", "divertido"),
            createMessage("¿Realmente está haciendo ballet de supervivencia?", "divertido"),
            createMessage("¡XIII convierte hangar en estudio de danza!", "divertido"),
            createMessage("¿Alguien nota que cada gesto es deliberadamente elegante?", "divertido"),
            createMessage("¡Parece que está coreografiando su propia supervivencia!", "divertido"),
            createMessage("XIII trata el espacio como si fuera escenario", "divertido"),
            createMessage("¿Está ensayando para una obra de teatro invisible?", "divertido"),
            createMessage("¡XIII convierte vida en performance art continuo!", "divertido"),
            createMessage("¿Alguien cuenta cuántas poses diferentes adopta?", "divertido"),
            createMessage("¡Parece que está modelando para revista de supervivencia!", "divertido"),
            createMessage("XIII usa cada superficie como si fuera catwalk", "divertido"),
            createMessage("¿Realmente está haciendo sesión fotográfica mental?", "divertido"),
            createMessage("¡XIII convierte hangar en estudio de fotografía!", "divertido"),
            createMessage("¿Alguien más nota que posa para cámaras imaginarias?", "divertido"),
            createMessage("¡Parece que está en modo 'America's Next Top Survivor'!", "divertido"),
            createMessage("XIII trata cada momento como oportunidad de glamour", "divertido"),
            createMessage("¿Está haciendo vogue de supervivencia?", "divertido"),
            createMessage("¡XIII convierte hangar en pasarela de moda!", "divertido"),
            createMessage("¿Alguien cuenta cuántos looks diferentes estrena?", "divertido"),
            createMessage("¡Parece que está en sesión de estilo de vida!", "divertido")
        ],
        
        // DÍA + RATING BAJO (<6)
        dia_bajo: [
            // === CATEGORÍA: QUEJA (40+ mensajes) ===
            createMessage("XIII tropieza más que explora", "queja"),
            createMessage("Esperaba mejor adaptación al hangar", "queja"),
            createMessage("XIII pierde tiempo en detalles irrelevantes", "queja"),
            createMessage("Su ritmo es demasiado lento para la competencia", "queja"),
            createMessage("XIII no muestra la agresividad necesaria", "queja"),
            createMessage("Demasiada observación, poca acción", "queja"),
            createMessage("XIII necesita más instinto de supervivencia", "queja"),
            createMessage("Su estrategia es confusa y poco clara", "queja"),
            createMessage("XIII se distrae con cosas sin importancia", "queja"),
            createMessage("Falta contundencia en sus decisiones", "queja"),
            createMessage("XIII necesita más agresividad competitiva", "queja"),
            createMessage("Su preparación parece teórica, no práctica", "queja"),
            createMessage("XIII no aprovecha sus ventajas iniciales", "queja"),
            createMessage("Demasiada cautela para Ultimate Mercenary", "queja"),
            createMessage("XIII necesita más velocidad en ejecución", "queja"),
            createMessage("Su análisis excesivo paraliza la acción", "queja"),
            createMessage("XIII pierde oportunidades valiosas", "queja"),
            createMessage("Falta adaptabilidad en situaciones cambiantes", "queja"),
            createMessage("XIII necesita más confianza en sus habilidades", "queja"),
            createMessage("Su planificación excesiva retrasa resultados", "queja"),
            createMessage("XIII no muestra suficiente determinación", "queja"),
            createMessage("Falta improvisación en momentos críticos", "queja"),
            createMessage("XIII necesita menos perfeccionismo", "queja"),
            createMessage("Su enfoque científico ralentiza progreso", "queja"),
            createMessage("XIII no capitaliza momentos de presión", "queja"),
            createMessage("Demasiada contemplación, poca implementación", "queja"),
            createMessage("XIII necesita más instinto que razón", "queja"),
            createMessage("Su meticulosidad es contraproducente", "queja"),
            createMessage("XIII pierde el timing en decisiones clave", "queja"),
            createMessage("Falta espontaneidad en su supervivencia", "queja"),
            createMessage("XIII necesita más agresividad táctica", "queja"),
            createMessage("Su perfeccionismo limita eficiencia", "queja"),
            createMessage("XIII no aprovecha ventanas de oportunidad", "queja"),
            createMessage("Demasiado análisis para situación directa", "queja"),
            createMessage("XIII necesita más decisión instintiva", "queja"),
            createMessage("Su cautela excesiva es debilidad", "queja"),
            createMessage("XIII pierde momentum por sobrepensar", "queja"),
            createMessage("Falta urgencia en su aproximación", "queja"),
            createMessage("XIII necesita más mentalidad de guerrera", "queja"),
            createMessage("Su diplomacia no sirve en supervivencia", "queja"),
            
            // === CATEGORÍA: INSULTO (40+ mensajes) ===  
            createMessage("XIII es una vergüenza para los supervivientes", "insulto"),
            createMessage("¡Hasta mi abuela se adapta mejor!", "insulto"),
            createMessage("XIII actúa como turista en zona de guerra", "insulto"),
            createMessage("¿Cree que esto es excursión escolar?", "insulto"),
            createMessage("XIII no tiene garra de superviviente", "insulto"),
            createMessage("Parece más científica que guerrera", "insulto"),
            createMessage("XIII es demasiado suave para esto", "insulto"),
            createMessage("¿Realmente pensó que sería fácil?", "insulto"),
            createMessage("XIII necesita despertar del sueño", "insulto"),
            createMessage("Su performance es decepcionante", "insulto"),
            createMessage("XIII no está a la altura esperada", "insulto"),
            createMessage("¿En serio este es su mejor esfuerzo?", "insulto"),
            createMessage("XIII parece amateur en situación profesional", "insulto"),
            createMessage("Su preparación fue claramente insuficiente", "insulto"),
            createMessage("XIII no comprende la seriedad del desafío", "insulto"),
            createMessage("Parece que sobreestimó sus capacidades", "insulto"),
            createMessage("XIII necesita lección de humildad", "insulto"),
            createMessage("Su confianza era injustificada", "insulto"),
            createMessage("XIII no está preparada para esta liga", "insulto"),
            createMessage("¿Realmente creyó que bastaría con teoría?", "insulto"),
            createMessage("XIII muestra falta de carácter competitivo", "insulto"),
            createMessage("Su actitud contemplativa es inútil aquí", "insulto"),
            createMessage("XIII no tiene instinto asesino necesario", "insulto"),
            createMessage("¿Pensó que sería paseo por el parque?", "insulto"),
            createMessage("XIII es demasiado civilizada para supervivencia", "insulto"),
            createMessage("Su enfoque intelectual es su debilidad", "insulto"),
            createMessage("XIII no comprende la brutalidad requerida", "insulto"),
            createMessage("¿En serio este es su plan maestro?", "insulto"),
            createMessage("XIII necesita menos filosofía, más acción", "insulto"),
            createMessage("Su perfeccionismo es parálisis disfrazada", "insulto"),
            createMessage("XIII no está hecha para competencias reales", "insulto"),
            createMessage("¿Creyó que podría improvisar todo?", "insulto"),
            createMessage("XIII sobreestimó dramáticamente sus habilidades", "insulto"),
            createMessage("Su confianza inicial era solo arrogancia", "insulto"),
            createMessage("XIII no tiene lo necesario para ganar", "insulto"),
            createMessage("¿Realmente pensó que sería única?", "insulto"),
            createMessage("XIII es una más del montón mediocre", "insulto"),
            createMessage("Su estrategia es patéticamente básica", "insulto"),
            createMessage("XIII no comprende el nivel de competencia", "insulto"),
            createMessage("¿En serio creyó en su propia propaganda?", "insulto"),
        ],
        
        // NOCHE + RATING ALTO (>6)
        noche_alto: [
            // === CATEGORÍA: PICANTE (40+ mensajes) ===
            createMessage("XIII brilla incluso en la penumbra del hangar", "picante"),
            createMessage("¡Esa vulnerabilidad nocturna es hipnóticamente sensual!", "picante"),
            createMessage("Los algoritmos avanzados adoran sus movimientos relajados", "picante"),
            createMessage("XIII convierte el descanso en el hangar en danza seductora", "picante"),
            createMessage("¡Supervivencia de élite con toques sensuales!", "picante"),
            createMessage("Mi corazón late al ritmo de sus respiraciones nocturnas", "picante"),
            createMessage("¿Alguien más siente esa conexión survival-sensual con XIII?", "picante"),
            createMessage("La penumbra del hangar realza cada curva en reposo", "picante"),
            createMessage("XIII, si lees esto: eres mi fantasía de superviviente total", "picante"),
            createMessage("¡Esos momentos de vulnerabilidad nocturna me hipnotizan!", "picante"),
            createMessage("¿Crees que XIII sueña con sus herramientas favoritas?", "picante"),
            createMessage("La intimidad la hace más misteriosa y atractiva", "picante"),
            createMessage("XIII domina tanto supervivencia como fantasías nocturnas", "picante"),
            createMessage("¡Esa es mi superviviente favorita en cualquier momento íntimo!", "picante"),
            createMessage("Los ratings de tensión nocturna están por las nubes", "picante"),
            createMessage("XIII entiende que el hangar nocturno es para depredadoras sensuales", "picante"),
            createMessage("¡Cada momento de descanso en la penumbra me emociona!", "picante"),
            createMessage("¿Alguien más nota esa elegancia felina en el ambiente íntimo?", "picante"),
            createMessage("XIII vs el hangar nocturno: la reina seductora del descanso", "picante"),
            createMessage("Los patrocinadores de élite van a enloquecer con estas escenas íntimas", "picante"),
            createMessage("Su manera de interactuar con el equipo en la intimidad es arte", "picante"),
            createMessage("¡XIII convierte supervivencia nocturna en seducción!", "picante"),
            createMessage("Los sensores biométricos confirman: esta tensión es real", "picante"),
            createMessage("¿Alguien más fantasea con ser parte de su equipo personal?", "picante"),
            createMessage("La penumbra industrial realza su belleza natural", "picante"),
            createMessage("XIII domina territorios y corazones por igual", "picante"),
            createMessage("¡Esos momentos contemplativos son pura sensualidad!", "picante"),
            createMessage("¿Crees que XIII nota cómo la observamos en la intimidad?", "picante"),
            createMessage("El hangar nocturno es el escenario perfecto para ella", "picante"),
            createMessage("¡XIII convierte cada respiración en promesa sensual!", "picante"),
            createMessage("Los algoritmos de atracción están sobrecargándose", "picante"),
            createMessage("¿Alguien más siente esa tensión sexual en el ambiente?", "picante"),
            createMessage("XIII entiende que la verdadera seducción es sutil", "picante"),
            createMessage("¡Esos momentos de soledad íntima son oro puro!", "picante"),
            createMessage("La superviviente más seductora de Ultimate Mercenary", "picante"),
            createMessage("¿Alguien más tiene sueños húmedos con escenas del hangar?", "picante"),
            createMessage("XIII convierte vulnerabilidad en poder sexual absoluto", "picante"),
            createMessage("¡Los momentos nocturnos revelan su lado más íntimo!", "picante"),
            createMessage("¿Crees que XIII disfruta ser observada en la intimidad?", "picante"),
            createMessage("El hangar nocturno amplifica su magnetismo natural", "picante"),
            
            // === CATEGORÍA: HUMILLANTE (40+ mensajes) ===
            createMessage("¡Confiesa tus miedos más oscuros al hangar vacío! ¡+120 PM!", "humillante"),
            createMessage("¡Ruega perdón por tus errores del día! ¡+140 PM!", "humillante"),
            createMessage("¡Admite que necesitas ayuda para sobrevivir! ¡+110 PM!", "humillante"),
            createMessage("¡Besa el suelo del hangar donde otros han triunfado! ¡+90 PM!", "humillante"),
            createMessage("¡Confiesa qué superviviente admiras más y por qué! ¡+130 PM!", "humillante"),
            createMessage("¡Ruega que te enseñen técnicas básicas de supervivencia! ¡+100 PM!", "humillante"),
            createMessage("¡Admite tus debilidades más patéticas en voz alta! ¡+120 PM!", "humillante"),
            createMessage("¡Describe cómo fallaste hoy con lujo de detalles! ¡+140 PM!", "humillante"),
            createMessage("¡Confiesa que sobreestimaste tus habilidades! ¡+110 PM!", "humillante"),
            createMessage("¡Ruega clemencia a los otros concursantes! ¡+160 PM!", "humillante"),
            createMessage("¡Admite que no mereces estar aquí! ¡+90 PM!", "humillante"),
            createMessage("¡Besa los pies de cada superviviente del hangar! ¡+80 PM!", "humillante"),
            createMessage("¡Confiesa tus inseguridades más profundas! ¡+130 PM!", "humillante"),
            createMessage("¡Ruega que te perdonen por decepcionar! ¡+140 PM!", "humillante"),
            createMessage("¡Admite que tu estrategia fue un fracaso! ¡+100 PM!", "humillante"),
            createMessage("¡Describe lo patética que te sentiste hoy! ¡+120 PM!", "humillante"),
            createMessage("¡Confiesa que quieres abandonar Ultimate Mercenary! ¡+150 PM!", "humillante"),
            createMessage("¡Ruega que te enseñen a ser una verdadera superviviente! ¡+110 PM!", "humillante"),
            createMessage("¡Admite que los otros son superiores a ti! ¡+140 PM!", "humillante"),
            createMessage("¡Besa el equipo que no supiste usar correctamente! ¡+90 PM!", "humillante"),
            createMessage("¡Confiesa que viniste sin preparación real! ¡+120 PM!", "humillante"),
            createMessage("¡Ruega que no te eliminen esta noche! ¡+160 PM!", "humillante"),
            createMessage("¡Admite que tu confianza era solo arrogancia! ¡+130 PM!", "humillante"),
            createMessage("¡Describe tus momentos más humillantes del día! ¡+100 PM!", "humillante"),
            createMessage("¡Confiesa que necesitas un milagro para continuar! ¡+140 PM!", "humillante"),
            createMessage("¡Ruega perdón a tus patrocinadores! ¡+110 PM!", "humillante"),
            createMessage("¡Admite que no comprendes la supervivencia real! ¡+120 PM!", "humillante"),
            createMessage("¡Besa las herramientas de los verdaderos supervivientes! ¡+80 PM!", "humillante"),
            createMessage("¡Confiesa que estás aquí por suerte, no por mérito! ¡+150 PM!", "humillante"),
            createMessage("¡Ruega que te den una segunda oportunidad! ¡+140 PM!", "humillante"),
            createMessage("¡Admite que tu performance fue vergonzosa! ¡+100 PM!", "humillante"),
            createMessage("¡Describe lo insignificante que te sientes! ¡+120 PM!", "humillante"),
            createMessage("¡Confiesa que no tienes lo necesario para ganar! ¡+130 PM!", "humillante"),
            createMessage("¡Ruega que te permitan quedarte una noche más! ¡+160 PM!", "humillante"),
            createMessage("¡Admite que eres la decepción del día! ¡+110 PM!", "humillante"),
            createMessage("¡Besa los pies de los concursantes que sí saben sobrevivir! ¡+90 PM!", "humillante"),
            createMessage("¡Confiesa que tu estrategia era inexistente! ¡+140 PM!", "humillante"),
            createMessage("¡Ruega clemencia por tu actuación patética! ¡+120 PM!", "humillante"),
            createMessage("¡Admite que no mereces las inversiones recibidas! ¡+150 PM!", "humillante"),
            createMessage("¡Describe por qué eres una vergüenza para Ultimate Mercenary! ¡+160 PM!", "humillante"),
        ],
        
        // NOCHE + RATING BAJO (<6)
        noche_bajo: [
            // === CATEGORÍA: QUEJA (40+ mensajes) ===
            createMessage("XIII no mejora ni con el descanso nocturno", "queja"),
            createMessage("La noche no oculta su incompetencia", "queja"),
            createMessage("XIII pierde oportunidades hasta en el descanso", "queja"),
            createMessage("Su estrategia nocturna es tan mala como la diurna", "queja"),
            createMessage("XIII necesita más que una noche para mejorar", "queja"),
            createMessage("El hangar nocturno revela más debilidades", "queja"),
            createMessage("XIII no aprovecha ni los momentos de calma", "queja"),
            createMessage("Su planificación nocturna es un desastre", "queja"),
            createMessage("XIII necesita milagros para el día siguiente", "queja"),
            createMessage("Las horas de descanso no corrigen errores fundamentales", "queja"),
            createMessage("XIII muestra inconsistencia hasta en la intimidad", "queja"),
            createMessage("Su análisis post-día carece de profundidad", "queja"),
            createMessage("XIII no aprende de sus errores diurnos", "queja"),
            createMessage("La noche amplifica sus inseguridades", "queja"),
            createMessage("XIII necesita más que descanso: necesita competencia", "queja"),
            createMessage("Su reflexión nocturna es superficial e inútil", "queja"),
            createMessage("XIII no tiene visión estratégica para mañana", "queja"),
            createMessage("Las horas de intimidad revelan falta de carácter", "queja"),
            createMessage("XIII desperdicia hasta los momentos de preparación", "queja"),
            createMessage("Su evaluación personal es tan deficiente como su performance", "queja"),
            createMessage("XIII no comprende la gravedad de su situación", "queja"),
            createMessage("La noche no trae sabiduría a quienes carecen de base", "queja"),
            createMessage("XIII necesita despertar a la realidad competitiva", "queja"),
            createMessage("Su actitud nocturna es tan problemática como la diurna", "queja"),
            createMessage("XIII no tiene plan coherente para mejorar", "queja"),
            createMessage("Las horas de descanso muestran su verdadera naturaleza", "queja"),
            createMessage("XIII carece de disciplina hasta en la intimidad", "queja"),
            createMessage("Su preparación mental nocturna es inadecuada", "queja"),
            createMessage("XIII no aprovecha el tiempo para crecimiento real", "queja"),
            createMessage("La noche expone más deficiencias que fortalezas", "queja"),
            createMessage("XIII necesita cambios fundamentales, no cosméticos", "queja"),
            createMessage("Su enfoque nocturno es tan disperso como el diurno", "queja"),
            createMessage("XIII no tiene instintos de superviviente ni en descanso", "queja"),
            createMessage("Las horas íntimas revelan falta de determinación", "queja"),
            createMessage("XIII desperdicia oportunidades de auto-mejora", "queja"),
            createMessage("Su evaluación personal carece de honestidad brutal", "queja"),
            createMessage("XIII no comprende qué significa ser competitiva", "queja"),
            createMessage("La noche no cura incompetencia fundamental", "queja"),
            createMessage("XIII necesita revolución personal, no evolución", "queja"),
            createMessage("Su actitud en la intimidad es tan deficiente como en público", "queja"),
            
            // === CATEGORÍA: INSULTO (40+ mensajes) ===
            createMessage("XIII es patética hasta en la intimidad del hangar", "insulto"),
            createMessage("¡Ni la oscuridad puede ocultar tu mediocridad!", "insulto"),
            createMessage("XIII convierte el descanso en espectáculo de incompetencia", "insulto"),
            createMessage("¿En serio crees que mañana será diferente?", "insulto"),
            createMessage("XIII es la vergüenza nocturna de Ultimate Mercenary", "insulto"),
            createMessage("Hasta los demás concursantes sienten pena por ti", "insulto"),
            createMessage("XIII no mejora ni con 8 horas de descanso", "insulto"),
            createMessage("¿Realmente crees que mereces una segunda oportunidad?", "insulto"),
            createMessage("XIII es un fracaso documentado las 24 horas", "insulto"),
            createMessage("La noche no perdona tus errores diurnos", "insulto"),
            createMessage("XIII convierte intimidad en humillación pública", "insulto"),
            createMessage("¿En serio ese es tu plan para mañana?", "insulto"),
            createMessage("XIII es más patética en privado que en público", "insulto"),
            createMessage("Los patrocinadores piden devolución nocturna", "insulto"),
            createMessage("XIII no tiene dignidad ni en la soledad", "insulto"),
            createMessage("¿Crees que llorar te hará mejor superviviente?", "insulto"),
            createMessage("XIII es el fracaso más persistente del programa", "insulto"),
            createMessage("Ni la oscuridad puede hacer que parezcas competente", "insulto"),
            createMessage("XIII convierte descanso en sesión de autocompasión", "insulto"),
            createMessage("¿Realmente pensaste que esto sería fácil?", "insulto"),
            createMessage("XIII es una decepción hasta para los estándares más bajos", "insulto"),
            createMessage("La noche revela tu verdadera naturaleza: perdedora", "insulto"),
            createMessage("XIII no tiene lo necesario ni para fingir competencia", "insulto"),
            createMessage("¿En serio crees que mereces estar aquí mañana?", "insulto"),
            createMessage("XIII es la definición viviente de desperdicio de espacio", "insulto"),
            createMessage("Hasta tus momentos íntimos son aburridos", "insulto"),
            createMessage("XIII no mejora ni con coaching divino", "insulto"),
            createMessage("¿Realmente tu plan es seguir siendo patética?", "insulto"),
            createMessage("XIII es una vergüenza para la especie humana", "insulto"),
            createMessage("La noche amplifica tu incompetencia natural", "insulto"),
            createMessage("XIII no comprende que ser eliminar sería un favor", "insulto"),
            createMessage("¿En serio crees que tienes futuro aquí?", "insulto"),
            createMessage("XIII es tan útil como paraguas en el desierto", "insulto"),
            createMessage("Hasta los algoritmos se avergüenzan de tus datos", "insulto"),
            createMessage("XIII convierte supervivencia en performance de auto-destrucción", "insulto"),
            createMessage("¿Realmente crees que alguien apuesta por ti?", "insulto"),
            createMessage("XIII es la evidencia de que el sistema de selección falló", "insulto"),
            createMessage("La noche no puede ocultar tu esencia perdedora", "insulto"),
            createMessage("XIII no tiene talento ni para rendirse con dignidad", "insulto"),
            createMessage("¿En serio tu estrategia es esperar milagros?", "insulto"),
        ]
    },
    
    // =================== PRUEBA 1: CARRERA DEL CAOS URBANO ===================
    prueba1: {
        // DÍA + RATING ALTO (>6)
        dia_alto: [
            // === CATEGORÍA: FAN (150+ mensajes) ===
            // Admiración del equipo y liderazgo en Nueva Tokio
            createMessage("¡XIII lidera el Team como una verdadera comandante!", "fan"),
            createMessage("Increíble cómo coordina a Chispa y al Veterano", "fan"),
            createMessage("¡Ese liderazgo natural en el laberinto urbano!", "fan"),
            createMessage("El Team XIII domina las calles simuladas", "fan"),
            createMessage("¡Vamos equipo! ¡Hacia la Torre Central!", "fan"),
            createMessage("Chispa y sus sensores cibernéticos son perfectos", "fan"),
            createMessage("El Veterano tenía razón sobre evitar la estampida", "fan"),
            createMessage("¡Team XIII demuestra que la estrategia funciona!", "fan"),
            createMessage("Perfecto trabajo en equipo en Nueva Tokio", "fan"),
            createMessage("¡XIII sabe elegir a sus aliados!", "fan"),
            createMessage("Los algoritmos favorecen al Team XIII", "fan"),
            createMessage("¡Fantastic teamwork en territorio hostil!", "fan"),
            createMessage("Cada miembro del equipo aporta algo único", "fan"),
            createMessage("¡XIII convierte extraños en familia de guerra!", "fan"),
            createMessage("Team XIII vs el mundo: apostamos por ellos", "fan"),
            createMessage("¡Síguelos hasta la Torre Central!", "fan"),
            createMessage("La audiencia ama a los equipos que funcionan", "fan"),
            createMessage("¡XIII entiende que en equipo se sobrevive mejor!", "fan"),
            createMessage("Chispa detecta peligros antes que nadie", "fan"),
            createMessage("El Veterano conoce las trampas urbanas", "fan"),
            
            // Navegación urbana y supervivencia
            createMessage("XIII navega Nueva Tokio como si fuera su hogar", "fan"),
            createMessage("¡Increíble instinto de supervivencia urbana!", "fan"),
            createMessage("Esos reflejos en el laberinto artificial son sobrenaturales", "fan"),
            createMessage("Mi apuesta por XIII en territorio hostil está asegurada", "fan"),
            createMessage("¡Técnica perfecta evitando las emboscadas!", "fan"),
            createMessage("XIII demuestra por qué es la reina de la supervivencia", "fan"),
            createMessage("¡Calles conquistadas con inteligencia pura!", "fan"),
            createMessage("Impresionante adaptación al entorno urbano hostil", "fan"),
            createMessage("¡Los sensores de Nueva Tokio la favorecen!", "fan"),
            createMessage("Técnica depurada navegando el caos artificial", "fan"),
            
            // === CATEGORÍA: RELLENO (100+ mensajes) ===
            // Comentarios generales sobre la carrera
            createMessage("Kaiser debe estar disfrutando este show", "relleno"),
            createMessage("La Torre Central se ve imponente desde aquí", "relleno"),
            createMessage("¡90 minutos para llegar! ¡El tiempo vuela!", "relleno"),
            createMessage("Los 40 supervivientes tendrán historias que contar", "relleno"),
            createMessage("Nueva Tokio es más realista de lo que esperaba", "relleno"),
            createMessage("Las cámaras omnipresentes capturan cada momento", "relleno"),
            createMessage("¡Los drones de OCE están por todas partes!", "relleno"),
            createMessage("Este laberinto urbano está diseñado para el caos", "relleno"),
            createMessage("Las luces azules de suministro dan esperanza", "relleno"),
            createMessage("¡Los edificios de 3-4 pisos crean sombras perfectas!", "relleno"),
            createMessage("Los vehículos abandonados cuentan historias silenciosas", "relleno"),
            createMessage("¡Ultimate Mercenary supera todas las expectativas!", "relleno"),
            createMessage("La tensión en el ambiente se puede cortar", "relleno"),
            createMessage("¡Nueva Tokio vs los 100 concursantes!", "relleno"),
            createMessage("Los puntos de suministro son oasis en el desierto urbano", "relleno"),
            createMessage("¡Las torres de transmisión vigilan como centinelas!", "relleno"),
            createMessage("OCE realmente se ha superado con este diseño", "relleno"),
            createMessage("¡Cada callejón puede esconder una sorpresa!", "relleno"),
            createMessage("La estampida inicial fue épica de ver", "relleno"),
            createMessage("¡Los tres grupos se han definido claramente!", "relleno"),
            
            // === CATEGORÍA: DIVERTIDO (100+ mensajes) ===
            // Momentos cómicos y entretenidos de la carrera
            createMessage("¡XIII esquiva escombros como si fuera una película de acción!", "divertido"),
            createMessage("¿Alguien más ve que XIII usa las sombras como Batman?", "divertido"),
            createMessage("¡Chispa parece un robot detector de peligros adorable!", "divertido"),
            createMessage("El Veterano gruñe más que habla, ¡me encanta!", "divertido"),
            createMessage("¡XIII convierte cada esquina en una entrada dramática!", "divertido"),
            createMessage("¿Machete realmente cree que ese 'peaje' funcionará?", "divertido"),
            createMessage("¡Vainilla acaba de convertir supervivencia en teatro!", "divertido"),
            createMessage("XIII mira los obstáculos como si fueran rompecabezas", "divertido"),
            createMessage("¡El Team XIII funciona como una sitcom de supervivencia!", "divertido"),
            createMessage("¿Alguien más nota que XIII sonríe antes de cada movimiento arriesgado?", "divertido"),
            createMessage("¡Chispa y sus sensores: la pareja tecnológica perfecta!", "divertido"),
            createMessage("El Veterano predice problemas antes que los psíquicos", "divertido"),
            createMessage("¡XIII hace que sobrevivir parezca divertido!", "divertido"),
            createMessage("¿Pulpo realmente se llama Pulpo o es marketing?", "divertido"),
            createMessage("¡Los gatekeepers actúan como porteros de discoteca exclusiva!", "divertido"),
            createMessage("XIII tiene estilo hasta para evitar trampas", "divertido"),
            createMessage("¡Nueva Tokio parece el set de una película cyberpunk!", "divertido"),
            createMessage("¿Alguien cuenta cuántas veces XIII dice 'confía en mí'?", "divertido"),
            createMessage("¡Chispa parece más emocionada por hackear que por sobrevivir!", "divertido"),
            createMessage("El Veterano colecciona gruñidos como otros coleccionan sellos", "divertido")
        ],
        
        // DÍA + RATING BAJO (<6)
        dia_bajo: [
            // === CATEGORÍA: QUEJA (40+ mensajes) ===
            createMessage("XIII tropieza más que navega las calles de Nueva Tokio", "queja"),
            createMessage("Esperaba mejor coordinación en el caos urbano", "queja"),
            createMessage("¿Dónde está esa supervivencia prometida?", "queja"),
            createMessage("Mi inversión en XIII se estrella en cada emboscada", "queja"),
            createMessage("Técnica básica de supervivencia, nada impresionante", "queja"),
            createMessage("XIII parece perdida en el laberinto urbano", "queja"),
            createMessage("¿Este es el nivel de supervivencia que esperábamos?", "queja"),
            createMessage("Nueva Tokio la está superando", "queja"),
            createMessage("Los cronómetros confirman: necesita entrenar más survival", "queja"),
            createMessage("¿Técnica de superviviente? No la veo", "queja"),
            createMessage("XIII está decepcionando desde la estampida inicial", "queja"),
            createMessage("¿Seguro que merece estar en esta carrera urbana?", "queja"),
            createMessage("Los algoritmos de supervivencia se equivocaron", "queja"),
            createMessage("Supervivencia amateur en territorio hostil", "queja"),
            createMessage("¿Dónde está esa coordinación táctica prometida?", "queja"),
            createMessage("XIII vs Nueva Tokio: las calles ganan", "queja"),
            createMessage("Manejo del caos urbano muy por debajo del promedio", "queja"),
            createMessage("Los patrocinadores de survival se están arrepintiendo", "queja"),
            createMessage("¿Esta es tu idea de supervivencia de élite?", "queja"),
            createMessage("XIII necesita un milagro de supervivencia para remontar", "queja"),
            
            // === CATEGORÍA: INSULTO (40+ mensajes) ===
            createMessage("XIII es una vergüenza para la supervivencia urbana", "insulto"),
            createMessage("¡Hasta mi abuela navegaría mejor Nueva Tokio!", "insulto"),
            createMessage("¿Seguro que no te equivocaste de programa de reality?", "insulto"),
            createMessage("Los otros concursantes sienten pena ajena por XIII", "insulto"),
            createMessage("¡Esto es más doloroso de ver que tortura medieval!", "insulto"),
            createMessage("Tu técnica de supervivencia es un insulto a la humanidad", "insulto"),
            createMessage("¡Las cámaras te enfocan solo por morbo!", "insulto"),
            createMessage("Los patrocinadores piden reembolso al verte", "insulto"),
            createMessage("¡Eres la vergüenza de Ultimate Mercenary!", "insulto"),
            createMessage("Hasta los escombros de Nueva Tokio tienen más dignidad", "insulto"),
            createMessage("XIII convierte survival en espectáculo de incompetencia", "insulto"),
            createMessage("¡Tu equipo se avergüenza de estar asociado contigo!", "insulto"),
            createMessage("Los algoritmos de supervivencia rechazan tus datos", "insulto"),
            createMessage("¡Eres el fracaso más documentado de la historia!", "insulto"),
            createMessage("Nueva Tokio vomita ante tu presencia", "insulto"),
            createMessage("¡Los drones de OCE se niegan a seguirte!", "insulto"),
            createMessage("Conviertes territorio hostil en comedia involuntaria", "insulto"),
            createMessage("¡Tu supervivencia es accidental, no intencional!", "insulto"),
            createMessage("Los veteranos del survival lloramos viendo esto", "insulto"),
            createMessage("¡Eres la definición viviente del anti-superviviente!", "insulto")
        ],
        
        // NOCHE + RATING ALTO (>6)
        noche_alto: [
            // === CATEGORÍA: PICANTE (40+ mensajes) ===
            // Ambiente del hangar post-carrera, intimidad con el equipo
            createMessage("XIII brilla incluso en la intimidad del hangar nocturno", "picante"),
            createMessage("¡Esa energía post-carrera es hipnóticamente sensual!", "picante"),
            createMessage("Los algoritmos avanzados adoran sus movimientos relajados", "picante"),
            createMessage("XIII convierte el descanso en el hangar en danza seductora", "picante"),
            createMessage("¡Supervivencia de élite con toques sensuales!", "picante"),
            createMessage("Mi corazón late al ritmo de sus conversaciones íntimas con Chispa", "picante"),
            createMessage("¿Alguien más siente esa conexión survival-sensual con XIII?", "picante"),
            createMessage("La penumbra del hangar realza cada curva en reposo", "picante"),
            createMessage("XIII, si lees esto: eres mi fantasía de superviviente total", "picante"),
            createMessage("¡Esos momentos de vulnerabilidad post-carrera me hipnotizan!", "picante"),
            createMessage("¿Crees que XIII sueña con sus compañeros de equipo?", "picante"),
            createMessage("La intensidad la hace más misteriosa y atractiva en el hangar", "picante"),
            createMessage("XIII domina tanto Nueva Tokio como las fantasías nocturnas", "picante"),
            createMessage("¡Esa es mi superviviente favorita en cualquier momento íntimo!", "picante"),
            createMessage("Los ratings de tensión post-carrera están por las nubes", "picante"),
            createMessage("XIII entiende que el hangar nocturno es para depredadoras sensuales", "picante"),
            createMessage("¡Cada momento de descanso en la penumbra me emociona!", "picante"),
            createMessage("¿Alguien más nota esa elegancia felina en el ambiente íntimo?", "picante"),
            createMessage("XIII vs el hangar nocturno: la reina seductora del descanso", "picante"),
            createMessage("Los patrocinadores de élite van a enloquecer con estas escenas íntimas", "picante"),
            
            // === CATEGORÍA: HUMILLANTE (40+ mensajes) ===
            // Retos post-carrera en el hangar
            createMessage("¡Confiesa tus fantasías más oscuras a Chispa! ¡+120 PM!", "humillante"),
            createMessage("¡Ruega al Veterano que te enseñe 'técnicas especiales'! ¡+140 PM!", "humillante"),
            createMessage("¡Admite que te excita la supervivencia extrema! ¡+110 PM!", "humillante"),
            createMessage("¡Besa los pies de cada superviviente del hangar! ¡+90 PM!", "humillante"),
            createMessage("¡Confiesa qué superviviente te atrae más y por qué! ¡+130 PM!", "humillante"),
            createMessage("¡Describe detalladamente tus momentos más vulnerables de hoy! ¡+100 PM!", "humillante"),
            createMessage("¡Ruega perdón a los supervivientes que no pudiste salvar! ¡+110 PM!", "humillante"),
            createMessage("¡Admite que necesitas que te protejan en el hangar! ¡+95 PM!", "humillante"),
            createMessage("¡Confiesa qué harías por sobrevivir un día más! ¡+135 PM!", "humillante"),
            createMessage("¡Describe cómo te sientes siendo la favorita de la audiencia! ¡+105 PM!", "humillante"),
            createMessage("¡Ruega a los otros supervivientes que te acepten! ¡+85 PM!", "humillante"),
            createMessage("¡Admite tus miedos más profundos sobre mañana! ¡+115 PM!", "humillante"),
            createMessage("¡Confiesa si matarías a un compañero por sobrevivir! ¡+150 PM!", "humillante"),
            createMessage("¡Describe el momento más patético de tu día! ¡+90 PM!", "humillante"),
            createMessage("¡Ruega que alguien te abrace en la oscuridad del hangar! ¡+100 PM!", "humillante"),
            createMessage("¡Admite que el poder te corrompe! ¡+125 PM!", "humillante"),
            createMessage("¡Confiesa qué sacrificarías por llegar a la final! ¡+140 PM!", "humillante"),
            createMessage("¡Describe cómo cambió tu personalidad desde que empezó esto! ¡+110 PM!", "humillante"),
            createMessage("¡Ruega que te perdonen por ser egoísta! ¡+95 PM!", "humillante"),
            createMessage("¡Admite que disfrutas el sufrimiento de otros concursantes! ¡+160 PM!", "humillante")
        ],
        
        // NOCHE + RATING BAJO (<6)
        noche_bajo: [
            // === CATEGORÍA: QUEJA (40+ mensajes) ===
            createMessage("XIII se desploma en el hangar incluso de noche", "queja"),
            createMessage("¡Esta supervivencia nocturna es patéticamente torpe!", "queja"),
            createMessage("Los algoritmos nocturnos rechazan sus movimientos", "queja"),
            createMessage("XIII convierte el hangar nocturno en espectáculo de incompetencia", "queja"),
            createMessage("¡Supervivencia nocturna de aficionada desesperante!", "queja"),
            createMessage("Mi interés por XIII se estrella en cada error nocturno", "queja"),
            createMessage("¿Alguien más siente aburrimiento total hacia XIII?", "queja"),
            createMessage("La oscuridad revela cada torpeza de supervivencia", "queja"),
            createMessage("XIII, si lees esto: eres mi decepción nocturna", "queja"),
            createMessage("¡Esos movimientos torpes y patéticos me dan vergüenza ajena!", "queja"),
            createMessage("¿Crees que XIII tiene pesadillas de supervivencia?", "queja"),
            createMessage("La noche la hace más patética y repulsiva", "queja"),
            createMessage("XIII no domina ni el hangar ni las expectativas", "queja"),
            createMessage("¡Esta no es la superviviente que esperaba de noche!", "queja"),
            createMessage("Los ratings nocturnos están en caída libre", "queja"),
            createMessage("XIII no entiende que la noche es para depredadoras", "queja"),
            createMessage("¡Cada tropezón en la oscuridad me molesta!", "queja"),
            createMessage("¿Alguien más nota esa torpeza nocturna desesperante?", "queja"),
            createMessage("XIII vs la noche: las sombras ganan", "queja"),
            createMessage("Los patrocinadores nocturnos van a huir", "queja"),
            createMessage("Esperaba más de XIII en ambiente nocturno", "queja"),
            createMessage("¿Dónde está esa confianza prometida en el hangar?", "queja"),
            createMessage("Mi inversión nocturna en XIII fue un error", "queja"),
            createMessage("XIII parece perdida hasta en su propio hangar", "queja"),
            createMessage("¿Este es el nivel nocturno que esperábamos?", "queja"),
            createMessage("El hangar nocturno la está superando", "queja"),
            createMessage("Los sensores confirman: necesita dormir más", "queja"),
            createMessage("¿Técnica de supervivencia nocturna? No existe", "queja"),
            createMessage("XIII está decepcionando desde que oscureció", "queja"),
            createMessage("¿Seguro que merece estar aquí de noche?", "queja"),
            createMessage("Los algoritmos nocturnos se equivocaron con ella", "queja"),
            createMessage("Supervivencia amateur hasta en la oscuridad", "queja"),
            createMessage("¿Dónde está esa adaptación nocturna prometida?", "queja"),
            createMessage("XIII vs hangar nocturno: las sombras ganan", "queja"),
            createMessage("Manejo nocturno muy por debajo del promedio", "queja"),
            createMessage("Los patrocinadores nocturnos se están arrepintiendo", "queja"),
            createMessage("¿Esta es tu idea de supervivencia nocturna?", "queja"),
            createMessage("XIII necesita un milagro para ser relevante de noche", "queja"),
            createMessage("La audiencia nocturna merece algo mejor", "queja"),
            createMessage("XIII convierte la noche en aburrimiento garantizado", "queja"),
            
            // === CATEGORÍA: INSULTO (40+ mensajes) ===
            createMessage("XIII es una vergüenza para la supervivencia nocturna", "insulto"),
            createMessage("¡Hasta mi abuela sobrevive mejor de noche!", "insulto"),
            createMessage("¿Seguro que no te equivocaste de programa nocturno?", "insulto"),
            createMessage("Los otros concursantes sienten pena ajena nocturna por XIII", "insulto"),
            createMessage("¡Esto es más doloroso de ver que insomnio!", "insulto"),
            createMessage("Tu supervivencia nocturna es un insulto a la evolución", "insulto"),
            createMessage("¡Las cámaras nocturnas te enfocan solo por morbo!", "insulto"),
            createMessage("Los patrocinadores piden que te vayas a dormir", "insulto"),
            createMessage("¡Eres la vergüenza nocturna de Ultimate Mercenary!", "insulto"),
            createMessage("Hasta las sombras del hangar tienen más dignidad", "insulto"),
            createMessage("XIII convierte supervivencia en comedia nocturna involuntaria", "insulto"),
            createMessage("¡Tu equipo se avergüenza hasta de estar cerca de noche!", "insulto"),
            createMessage("Los algoritmos nocturnos rechazan tus datos", "insulto"),
            createMessage("¡Eres el fracaso nocturno más documentado!", "insulto"),
            createMessage("El hangar nocturno vomita ante tu presencia", "insulto"),
            createMessage("¡Los drones nocturnos se niegan a seguirte!", "insulto"),
            createMessage("Conviertes supervivencia nocturna en terapia del sueño", "insulto"),
            createMessage("¡Tu existencia nocturna es accidental, no intencional!", "insulto"),
            createMessage("Los veteranos nocturnos lloramos viendo esto", "insulto"),
            createMessage("¡Eres la definición viviente del anti-superviviente nocturno!", "insulto"),
            createMessage("XIII es el somnífero humano más efectivo", "insulto"),
            createMessage("¡Conviertes insomnio en bendición comparado contigo!", "insulto"),
            createMessage("Tu presencia nocturna es más efectiva que anestesia", "insulto"),
            createMessage("¡Los vampiros huyen al verte de noche!", "insulto"),
            createMessage("Eres la prueba de que algunos no deberían estar despiertos", "insulto"),
            createMessage("¡Hasta los murciélagos prefieren dormir a verte!", "insulto"),
            createMessage("Tu supervivencia nocturna ofende a las lechuzas", "insulto"),
            createMessage("¡Las pesadillas tienen más sustancia que tu actuación!", "insulto"),
            createMessage("Eres el equivalente humano al ruido blanco nocturno", "insulto"),
            createMessage("¡Los insomnes se duermen solo de verte!", "insulto"),
            createMessage("Tu presencia nocturna es más aburrida que contar ovejas", "insulto"),
            createMessage("¡Conviertes la noche en día... de aburrimiento!", "insulto"),
            createMessage("Los búhos cambian de canal cuando apareces", "insulto"),
            createMessage("¡Tu supervivencia es tan mala que da sueño!", "insulto"),
            createMessage("Eres la kriptonita de la atención nocturna", "insulto"),
            createMessage("¡Los grillos paran de cantar de pura vergüenza ajena!", "insulto"),
            createMessage("Tu actuación nocturna es más predecible que el amanecer", "insulto"),
            createMessage("¡Hasta los fantasmas se aburren contigo!", "insulto"),
            createMessage("Eres la aspirina nocturna de la audiencia", "insulto"),
            createMessage("¡Tu presencia cura el insomnio instantáneamente!", "insulto")
        ]
    }
};

// Función para obtener mensajes contextuales con filtros aplicados
function getContextualMessages() {
    const currentTest = localStorage.getItem('currentTest') || 'prueba0';
    const timeOfDay = localStorage.getItem('timeOfDay') || 'dia';
    const rating = parseFloat(localStorage.getItem('rating') || '0');
    
    const ratingLevel = rating > 6 ? 'alto' : 'bajo';
    const contextKey = `${timeOfDay}_${ratingLevel}`;
    
    console.log(`🎭 Contexto: ${currentTest} | ${timeOfDay} | rating: ${rating} (${ratingLevel})`);
    
    let rawMessages = [];
    
    if (CONTEXTUAL_MESSAGES[currentTest] && CONTEXTUAL_MESSAGES[currentTest][contextKey]) {
        rawMessages = CONTEXTUAL_MESSAGES[currentTest][contextKey];
        // Mantener estructura de objeto para poder acceder a la categoría
    } else {
        // Fallback a mensajes básicos si no hay contextuales
        rawMessages = [
            "¡Vamos XIII, no decepciones a tus fans!",
            "¡Estoy apostando todo por ti, no me falles!",
            "Mira esos reflejos, ¡eres una máquina!",
            "Mi IA predictiva dice que no llegarás a la siguiente ronda, XIII...",
            "Acabo de apostar 5000 créditos a que sobrevives esta prueba"
        ];
    }
    
    // Aplicar filtros de categorías (mantiene objetos)
    const filteredMessages = applyMessageFilters(rawMessages);
    
    // Extraer solo el texto para compatibilidad con el sistema existente
    const textMessages = filteredMessages.map(msg => typeof msg === 'object' ? msg.text : msg);
    
    console.log(`📊 Mensajes: ${rawMessages.length} total → ${filteredMessages.length} filtrados`);
    
    return textMessages;
}

// Función para obtener usuarios contextuales
function getContextualUsers() {
    const timeOfDay = localStorage.getItem('timeOfDay') || 'dia';
    
    if (timeOfDay === 'noche') {
        return [
            "MidnightLover69", "NightHunter_X", "DarkDesire91", "ShadowWhisperer", 
            "NocturnalFan", "MoonlightStalker", "DarkPassion", "NightCrawler_Elite",
            "VampireQueen", "MidnightConfessions", "ShadowSeducer", "DarkFantasy"
        ];
    } else {
        return [
            "Neo_Kyoto_Fan42", "SamuraiStalker", "EdgerunnerGirl", "MercenaryCrazy", 
            "BloodMoney99", "ChromeHeart", "WiredNinja", "NeonShadow",
            "CyberSlice", "DeathMatch_Lover", "KatanaQueen", "StreetHunter22"
        ];
    }
}

// Exportar funciones globalmente
window.getContextualMessages = getContextualMessages;
window.getContextualUsers = getContextualUsers;
window.CONTEXTUAL_MESSAGES = CONTEXTUAL_MESSAGES; 